@model IEnumerable<WebModule>
@{

}

<script type="text/javascript">

</script>

<div id="wrapper-navbar">
    <nav id="top" class="navbar py-3 fixed-top navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand ml-sm-5" href="/"><img src="/images/logo-omegatours.png" alt="image"></a>
        <button class="navbar-toggler collapsed navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
            <span class="sr-only">Toggle navigation</span>
        </button>
        <div class="collapse navbar-collapse ml-auto" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                @{
                    var root = from x in Model where x.ParentID == null select x;
                }
                @foreach (var node in root)
                {

                    var url = node.URL;
                    if (string.IsNullOrEmpty(node.URL) || string.IsNullOrWhiteSpace(node.URL))
                    {
                        url = Url.Action("Index", "Home", new { metatitle = node.MetaTitle != null ? node.MetaTitle : "web" });
                    }
                    <li class="nav-item dropdown">
                        @{
                            var sub = from x in Model where x.ParentID == node.ID select x;
                        }
                        @if (sub.Any())
                        {
                            var idDrop = "navbarDropdown" + @node.ID;
                            <a class="nav-link dropdown-toggle  mr-3 open my-lg-0 my-2 ml-lg-0 ml-3" href="#" id="@idDrop" role="button" data-toggle="dropdown"
                               aria-haspopup="true" aria-expanded="false">
                                @node.Title
                            </a>
                            @CreateMenu(sub, idDrop)
                        }
                        else
                        { 
                            <a class="nav-link ml-lg-0 ml-3 mr-4 my-lg-0 my-2 lastitem" href="@url">
                                @node.Title
                            </a>

                        }
                    </li>
                }
            <li>
                <a class="nav-link ml-lg-0 ml-3 mr-4 my-lg-0 my-2 lastitem agenthub" href="http://agent.omegatours.vn/Account/Login">
                    Agent Hub
                </a>
            </li>
            </ul>

            <div class="row d-none d-lg-block sidebartop">
                <div class="col-12 mr-4 sidebar">
                    <div class="mini-submenu">
                        <span class="icon-bar2"></span>
                        <span class="icon-bar2"></span>
                        <span class="icon-bar2"></span>
                    </div>
                    <div class="list-group">
                        <span class="list-group-item active">
                            <p class="name-site">Omega Tours</p>
                            <span class="pull-right" id="slide-submenu">
                                <i class="fa fa-times"></i>
                            </span>
                        </span>
                        <div class="white py-4 px-5 text-center  list-group-item light">
                            @Html.Action("_Body", "WebSimpleContent", new { area = "", key = "sidebartop" })
                        </div>


                        <ul class="list-group-item py-4">
                            <li>

                                @if (ApplicationService.Culture.Equals("en-US"))
                                {
                                    <h5 class="white text-center">
                                        <i class="white fa fa-map-marker mr-2"></i>  Head Office: 2nd floor, No. 1 Le Duan, Da Nang City
                                    </h5>
                                    <h5 class="white text-center">
                                        <i class="white fa fa-location-arrow mr-2"></i> Hanoi branch: 2nd floor, No. 164 Mai Anh Tuan, Ha Noi
                                    </h5>
                                }
                                else
                                {
                                    <h5 class="white text-center">
                                        <i class="white fa fa-map-marker mr-2"></i> Trụ sở chính: Tầng 2, Số 1 Lê Duẩn, TP Đà Nẵng
                                    </h5>
                                    <h5 class="white text-center">
                                        <i class="white fa fa-location-arrow mr-2"></i> Chi nhánh Hà Nội: Tầng 2, Số 164 Mai Anh Tuấn, Hà Nội
                                    </h5>
                                }

                            </li>
                            <li><h5 class="white text-center"><i class="white fa fa-phone-square mr-2"></i>+84 90 569 1718</h5></li>
                            <li><h5 class="white text-center"><i class="white fa fa-envelope mr-2"></i>info@omegatours.vn</h5></li>
                        </ul>
                        <div class="list-group-item text-center pt-4 ">
                            <h6>Follow Us</h6>
                            <ul class="text-center py-3">
                                <li class="list-inline-item"><a href="https://www.facebook.com/Omegatours.vn/"><i class="fa fa-facebook-f"></i></a></li>
                                <li class="list-inline-item"><a href="https://www.linkedin.com/company/omegatoursvietnam"><i class="fa fa-linkedin"></i></a></li>
                                <li class="list-inline-item"><a href="https://www.instagram.com/omegatours.vietnam/"><i class="fa fa-instagram"></i></a></li>
                            </ul>
                            <div class="list-group-item py-4">
                                @if (ApplicationService.Culture.Equals("en-US"))
                                {
                                    <a href="/about-us-5" class="d-block white py-2">
                                        <i class="fa fa-users"></i> About Us
                                    </a>
                                    <a class="white d-block" href="/contact-us-6">
                                        <i class=" fa fa-envelope">
                                        </i> Contact Us
                                    </a>
                                }
                                else
                                {
                                    <a href="/about-us-5" class="d-block white py-2">
                                        <i class="fa fa-users"></i> Về chúng tôi
                                    </a>
                                    <a class="white d-block" href="/contact-us-6">
                                        <i class=" fa fa-envelope">
                                        </i> Liên hệ
                                    </a>
                                }


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>


@helper CreateMenu(IEnumerable<WebModels.WebModule> nodes, string idDrop)
{

    <div class="dropdown-menu dropdownId dropdown-menu-right" aria-labelledby="navbarDropdown1">
        @foreach (var item in nodes)
        {
            var url = item.URL;
            if (string.IsNullOrEmpty(item.URL) || string.IsNullOrWhiteSpace(item.URL))
            {
                url = Url.Action("Index", "Home", new { metatitle = item.MetaTitle != null ? item.MetaTitle : "web" });
            }

            <a class="dropdown-item mt-1" href="@url" title="@item.Title"> @item.Title </a>
            <div class="dropdown-divider"></div>
        }
    </div>
}